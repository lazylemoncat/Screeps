{"code":"import { globalStructure } from \"@/global/GlobalStructure\";\r\nexport const tasks = {\r\n    withdraw: {\r\n        creep: [],\r\n        link: [],\r\n        container: [],\r\n        storage: [],\r\n    },\r\n    transfer: {\r\n        spawn: [],\r\n        extension: [],\r\n        tower: [],\r\n        container: [],\r\n        storage: [],\r\n    },\r\n    returnTransfer: function () {\r\n        findTransferTask();\r\n        let task = [];\r\n        for (let key in tasks.transfer) {\r\n            task = task.concat(tasks.transfer[key]);\r\n        }\r\n        return task;\r\n    },\r\n    returnWithdraw: function () {\r\n        findWithdraw();\r\n        let task = [];\r\n        for (let key in tasks.withdraw) {\r\n            task = task.concat(tasks.withdraw[key]);\r\n        }\r\n        return task;\r\n    },\r\n};\r\nfunction findWithdraw() {\r\n    linkTask('withdraw');\r\n    containerTask('withdraw');\r\n    storageTask('withdraw');\r\n}\r\nfunction findTransferTask() {\r\n    transferTask('spawn');\r\n    transferTask('extension');\r\n    transferTask('tower');\r\n    transferTask('container');\r\n    transferTask('storage');\r\n}\r\nfunction transferTask(type) {\r\n    let targets = globalStructure.structures.filter(structure => structure.structureType == type &&\r\n        Game.getObjectById(structure.id).store.getFreeCapacity(RESOURCE_ENERGY) > 0);\r\n    for (let i = 0; i < targets.length; ++i) {\r\n        if (!tasks.transfer[type].includes(targets[i].id)) {\r\n            tasks.transfer[type].push(targets[i].id);\r\n        }\r\n    }\r\n}\r\nfunction linkTask(task) {\r\n    switch (task) {\r\n        case 'withdraw': {\r\n            let links = globalStructure.toLinks;\r\n            for (let i = 0; i < globalStructure.toLinks.length; ++i) {\r\n                let link = Game.getObjectById(links[i].id);\r\n                if (link.store[RESOURCE_ENERGY] > 100 && !tasks.withdraw.link.includes(link.id)) {\r\n                    tasks.withdraw.link.push(link.id);\r\n                }\r\n            }\r\n            break;\r\n        }\r\n    }\r\n}\r\nfunction containerTask(task) {\r\n    switch (task) {\r\n        case 'withdraw': {\r\n            let containers = globalStructure.containers;\r\n            for (let i = 0; i < containers.length; ++i) {\r\n                if (containers[i].pos.findInRange(globalStructure.sources, 1).length != 0) {\r\n                    let container = Game.getObjectById(containers[i].id);\r\n                    if (container.store[RESOURCE_ENERGY] >= 50) {\r\n                        tasks.withdraw.container.push(container.id);\r\n                    }\r\n                }\r\n            }\r\n            break;\r\n        }\r\n    }\r\n}\r\nfunction storageTask(task) {\r\n    switch (task) {\r\n        case 'withdraw': {\r\n            let storage = Object.values(Game.rooms)[0].storage;\r\n            if (storage != undefined && storage.store[RESOURCE_ENERGY] >= 0) {\r\n                tasks.withdraw.storage.push(storage.id);\r\n            }\r\n            break;\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=Tasks.js.map","references":["D:/Desktop/ScreepsCodes/World/src/global/GlobalStructure.ts"],"map":"{\"version\":3,\"file\":\"Tasks.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/Tasks/Tasks.ts\"],\"names\":[],\"mappings\":\"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\"}"}
