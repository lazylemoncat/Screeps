{"code":"export const roleBuilder = {\r\n    run: function (creep) {\r\n        if (backRoom(creep) == 0) {\r\n            return;\r\n        }\r\n        if (creep.memory.building && creep.store[RESOURCE_ENERGY] == 0) {\r\n            creep.memory.building = false;\r\n        }\r\n        else if (!creep.memory.building && creep.store.getFreeCapacity() == 0) {\r\n            creep.memory.building = true;\r\n        }\r\n        if (creep.memory.building) {\r\n            goBuild(creep);\r\n        }\r\n        else {\r\n            goGetEnergy(creep);\r\n        }\r\n    }\r\n};\r\nfunction backRoom(creep) {\r\n    if (creep.room != Game.spawns[\"Spawn1\"].room) {\r\n        creep.moveTo(Game.spawns[\"Spawn1\"]);\r\n        return 0;\r\n    }\r\n    else {\r\n        return -1;\r\n    }\r\n}\r\nfunction goBuild(creep) {\r\n    let target = creep.room.find(FIND_CONSTRUCTION_SITES);\r\n    if (target[0]) {\r\n        if (creep.build(target[0]) == ERR_NOT_IN_RANGE) {\r\n            creep.moveTo(target[0], { visualizePathStyle: { stroke: '#ffffff' } });\r\n        }\r\n    }\r\n}\r\nfunction goGetEnergy(creep) {\r\n    let targetStore = creep.pos.findClosestByPath(FIND_STRUCTURES, { filter: (structure) => {\r\n            return (structure.structureType == STRUCTURE_CONTAINER ||\r\n                structure.structureType == STRUCTURE_STORAGE) &&\r\n                structure.store[RESOURCE_ENERGY] > 0;\r\n        } });\r\n    if (targetStore != null) {\r\n        if (creep.withdraw(targetStore, RESOURCE_ENERGY) == ERR_NOT_IN_RANGE) {\r\n            creep.moveTo(targetStore);\r\n        }\r\n        return;\r\n    }\r\n    else {\r\n        let soureces = creep.room.find(FIND_SOURCES, { filter: (sources) => sources.energy > 0 });\r\n        if (creep.harvest(soureces[0]) == ERR_NOT_IN_RANGE) {\r\n            creep.moveTo(soureces[0], { visualizePathStyle: { stroke: '#ffaa00' } });\r\n        }\r\n        return;\r\n    }\r\n}\r\n//# sourceMappingURL=RoleBuilder.js.map","references":[],"map":"{\"version\":3,\"file\":\"RoleBuilder.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/Role/RoleBuilder.ts\"],\"names\":[],\"mappings\":\"AAAA,MAAM,CAAC,MAAM,WAAW,GAAG;IACzB,GAAG,EAAE,UAAU,KAAY;QACzB,IAAI,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;YACxB,OAAO;SACR;QACD,IAAG,KAAK,CAAC,MAAM,CAAC,QAAQ,IAAI,KAAK,CAAC,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE;YAC7D,KAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,KAAK,CAAC;SAC/B;aAAM,IAAG,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,IAAI,KAAK,CAAC,KAAK,CAAC,eAAe,EAAE,IAAI,CAAC,EAAE;YACtE,KAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC;SAC9B;QAED,IAAG,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAE;YACxB,OAAO,CAAC,KAAK,CAAC,CAAC;SAChB;aAAM;YACL,WAAW,CAAC,KAAK,CAAC,CAAC;SACpB;IACJ,CAAC;CACD,CAAC;AAEF,SAAS,QAAQ,CAAC,KAAY;IAC5B,IAAI,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,EAAE;QAC5C,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;QACpC,OAAO,CAAC,CAAC;KACV;SAAM;QACL,OAAO,CAAC,CAAC,CAAC;KACX;AACH,CAAC;AAED,SAAS,OAAO,CAAC,KAAY;IAC3B,IAAI,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;IACpD,IAAG,MAAM,CAAC,CAAC,CAAC,EAAE;QACZ,IAAG,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,gBAAgB,EAAE;YAC7C,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAC,kBAAkB,EAAE,EAAC,MAAM,EAAE,SAAS,EAAC,EAAC,CAAC,CAAC;SACpE;KACF;AACL,CAAC;AAED,SAAS,WAAW,CAAC,KAAY;IAC/B,IAAI,WAAW,GAAG,KAAK,CAAC,GAAG,CAAC,iBAAiB,CAAC,eAAe,EAC3D,EAAC,MAAM,EAAE,CAAC,SAAS,EAAE,EAAE;YAAE,OAAO,CAAC,SAAS,CAAC,aAAa,IAAI,mBAAmB;gBAC/E,SAAS,CAAC,aAAa,IAAI,iBAAiB,CAAC;gBAC7C,SAAS,CAAC,KAAK,CAAC,eAAe,CAAC,GAAG,CAAC,CAAA;QAAA,CAAC,EAAC,CAAC,CAAC;IAE1C,IAAI,WAAW,IAAI,IAAI,EAAE;QACvB,IAAI,KAAK,CAAC,QAAQ,CAAC,WAAW,EAAE,eAAe,CAAC,IAAI,gBAAgB,EAAE;YACpE,KAAK,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;SAC3B;QACD,OAAO;KACR;SAAM;QACL,IAAI,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,EAAC,MAAM,EAClD,CAAC,OAAO,EAAE,EAAE,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,EAAC,CAAC,CAAC;QACpC,IAAI,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,gBAAgB,EAAE;YAClD,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,EAAC,kBAAkB,EAAE,EAAC,MAAM,EAAE,SAAS,EAAC,EAAC,CAAC,CAAC;SACtE;QACD,OAAO;KACR;AACH,CAAC\"}"}
