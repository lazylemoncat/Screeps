{"code":"import { newCreepBody } from \"../NewCreep/NewCreepBodys\";\r\nimport { globalStructure } from \"../global/GlobalStructure\";\r\nimport { roleTransfer } from \"../Role/RoleTransfer\";\r\nimport { tasks } from \"./Tasks\";\r\nexport const transferTask = {\r\n    run: function () {\r\n        newTransfer();\r\n        findTransferTask();\r\n        let transferIndex = 0;\r\n        let withdrawIndex = 0;\r\n        for (let i = 0; i < Memory.roles.transfers.length; ++i) {\r\n            let transfer = Game.getObjectById(Memory.roles.transfers[i]);\r\n            if (roleTransfer.isTransfering(transfer)) {\r\n                roleTransfer.goTransfer(transfer, tasks.transferTasks[transferIndex++]);\r\n            }\r\n            else {\r\n                roleTransfer.goWithdraw(transfer, tasks.withdrawTasks[withdrawIndex++]);\r\n            }\r\n        }\r\n    }\r\n};\r\nfunction newTransfer() {\r\n    if (Game.spawns['Spawn1'].memory.shouldSpawn != null) {\r\n        return;\r\n    }\r\n    let harvesters = Memory.roles.harvesters;\r\n    let transfers = Memory.roles.transfers;\r\n    let sources = globalStructure.sources;\r\n    if (transfers.length > harvesters.length && transfers.length >= sources.length) {\r\n        return;\r\n    }\r\n    Game.spawns['Spawn1'].memory.shouldSpawn = 'transfer';\r\n    let newName = 'Transfer' + Game.time;\r\n    Game.spawns['Spawn1'].spawnCreep(newCreepBody('transfer'), newName, { memory: {\r\n            role: 'transfer',\r\n        } });\r\n}\r\nfunction findTransferTask() {\r\n    spawnTransfer();\r\n    extensionTransfer();\r\n    towerTransfer();\r\n    containerTransfer();\r\n    storageTransfer();\r\n}\r\nfunction spawnTransfer() {\r\n    let spawns = globalStructure.structures.filter(structure => structure.structureType == STRUCTURE_SPAWN &&\r\n        structure.store.getFreeCapacity(RESOURCE_ENERGY) > 10);\r\n    for (let i = 0; i < spawns.length; ++i) {\r\n        tasks.transferTasks.push(spawns[i].id);\r\n    }\r\n}\r\nfunction extensionTransfer() {\r\n}\r\nfunction towerTransfer() {\r\n}\r\nfunction containerTransfer() {\r\n}\r\nfunction storageTransfer() {\r\n}\r\n//# sourceMappingURL=TransferTask.js.map","references":["D:/Desktop/ScreepsCodes/World/src/NewCreep/NewCreepBodys.ts","D:/Desktop/ScreepsCodes/World/src/global/GlobalStructure.ts","D:/Desktop/ScreepsCodes/World/src/Role/RoleTransfer.ts","D:/Desktop/ScreepsCodes/World/src/Tasks/Tasks.ts","D:/Desktop/ScreepsCodes/World/src/Structure/StructureLink.ts"],"map":"{\"version\":3,\"file\":\"TransferTask.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/Tasks/TransferTask.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,YAAY,EAAE,MAAM,2BAA2B,CAAC;AACzD,OAAO,EAAE,eAAe,EAAE,MAAM,2BAA2B,CAAC;AAC5D,OAAO,EAAE,YAAY,EAAE,MAAM,sBAAsB,CAAC;AACpD,OAAO,EAAE,KAAK,EAAE,MAAM,SAAS,CAAC;AAGhC,MAAM,CAAC,MAAM,YAAY,GAAG;IAC1B,GAAG,EAAE;QACH,WAAW,EAAE,CAAC;QACd,gBAAgB,EAAE,CAAC;QACnB,IAAI,aAAa,GAAG,CAAC,CAAC;QACtB,IAAI,aAAa,GAAG,CAAC,CAAC;QACtB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;YACtD,IAAI,QAAQ,GAAU,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;YACpE,IAAI,YAAY,CAAC,aAAa,CAAC,QAAQ,CAAC,EAAE;gBACxC,YAAY,CAAC,UAAU,CAAC,QAAQ,EAAE,KAAK,CAAC,aAAa,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;aACzE;iBAAM;gBACL,YAAY,CAAC,UAAU,CAAC,QAAQ,EAAE,KAAK,CAAC,aAAa,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;aACzE;SACF;IACH,CAAC;CACF,CAAA;AAED,SAAS,WAAW;IAClB,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,WAAW,IAAI,IAAI,EAAE;QACpD,OAAO;KACR;IACD,IAAI,UAAU,GAAG,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC;IACzC,IAAI,SAAS,GAAG,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC;IACvC,IAAI,OAAO,GAAG,eAAe,CAAC,OAAO,CAAC;IACtC,IAAI,SAAS,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM,IAAI,SAAS,CAAC,MAAM,IAAI,OAAO,CAAC,MAAM,EAAE;QAC5E,OAAO;KACV;IACD,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,WAAW,GAAG,UAAU,CAAC;IAEtD,IAAI,OAAO,GAAW,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC;IAC7C,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,UAAU,CAAC,YAAY,CAAC,UAAU,CAAC,EAAE,OAAO,EAAE,EAAC,MAAM,EAAE;YAC3E,IAAI,EAAE,UAAU;SAAE,EAAC,CAAC,CAAC;AACzB,CAAC;AAED,SAAS,gBAAgB;IACvB,aAAa,EAAE,CAAC;IAChB,iBAAiB,EAAE,CAAC;IACpB,aAAa,EAAE,CAAC;IAChB,iBAAiB,EAAE,CAAC;IACpB,eAAe,EAAE,CAAC;AACpB,CAAC;AAED,SAAS,aAAa;IACpB,IAAI,MAAM,GAAG,eAAe,CAAC,UAAU,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,CACzD,SAAS,CAAC,aAAa,IAAI,eAAe;QAC1C,SAAS,CAAC,KAAK,CAAC,eAAe,CAAC,eAAe,CAAC,GAAG,EAAE,CAAC,CAAC;IACzD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;QACtC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;KACxC;AACH,CAAC;AAED,SAAS,iBAAiB;AAE1B,CAAC;AAED,SAAS,aAAa;AAEtB,CAAC;AACD,SAAS,iBAAiB;AAE1B,CAAC;AAED,SAAS,eAAe;AAExB,CAAC\"}"}
