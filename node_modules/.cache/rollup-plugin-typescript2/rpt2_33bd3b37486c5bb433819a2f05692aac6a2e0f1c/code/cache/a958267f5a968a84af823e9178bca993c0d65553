{"code":"import { tasks } from \"../Tasks/Tasks\";\r\nexport const roleTransfer = {\r\n    isTransfering: function (creep) {\r\n        if (creep.memory.transfering && creep.store[RESOURCE_ENERGY] == 0) {\r\n            creep.memory.transfering = false;\r\n        }\r\n        if (!creep.memory.transfering && creep.store.getFreeCapacity() == 0) {\r\n            creep.memory.transfering = true;\r\n        }\r\n        return creep.memory.transfering;\r\n    },\r\n    goTransfer: function (creep, task) {\r\n        creep.memory.carrierTarget = task;\r\n        let target = Game.getObjectById(task);\r\n        if (target == null || target.store.getFreeCapacity(RESOURCE_ENERGY) == 0) {\r\n            for (let key in tasks.transfer) {\r\n                if (tasks.transfer[key].includes(task)) {\r\n                    tasks.transfer[key].splice(tasks.transfer[key].indexOf(task), 1);\r\n                    creep.memory.carrierTarget = null;\r\n                    break;\r\n                }\r\n            }\r\n            return;\r\n        }\r\n        let type = target.structureType;\r\n        let res = 0;\r\n        res = creep.transfer(target, RESOURCE_ENERGY);\r\n        switch (res) {\r\n            case OK:\r\n                creep.memory.carrierTarget = null;\r\n                break;\r\n            case ERR_NOT_IN_RANGE:\r\n                creep.moveTo(target, { reusePath: 1 });\r\n                break;\r\n        }\r\n        tasks.transfer[type].splice(tasks.transfer[type].indexOf(task), 1);\r\n        return;\r\n    },\r\n    goWithdraw: function (creep, task) {\r\n        let target = Game.getObjectById(task);\r\n        creep.memory.carrierTarget = task;\r\n        if (target == null) {\r\n            for (let key in tasks.withdraw) {\r\n                if (tasks.withdraw[key].includes(target)) {\r\n                    tasks.withdraw[key].splice(tasks.withdraw[key].indexOf(task), 1);\r\n                    break;\r\n                }\r\n            }\r\n            creep.memory.carrierTarget = null;\r\n            return;\r\n        }\r\n        let res = 0;\r\n        if (target instanceof Creep) {\r\n            res = target.transfer(creep, RESOURCE_ENERGY);\r\n            target.memory.waiting = creep.id;\r\n            switch (res) {\r\n                case OK:\r\n                    creep.memory.carrierTarget = null;\r\n                    target.memory.waiting = null;\r\n                    break;\r\n                case ERR_NOT_IN_RANGE:\r\n                    creep.moveTo(target, { reusePath: 1 });\r\n                    break;\r\n            }\r\n            tasks.withdraw.creep.splice(tasks.withdraw.creep.indexOf(task), 1);\r\n        }\r\n        else {\r\n            let type = target.structureType;\r\n            res = creep.withdraw(target, RESOURCE_ENERGY);\r\n            switch (res) {\r\n                case OK:\r\n                    creep.memory.carrierTarget = null;\r\n                    break;\r\n                case ERR_NOT_IN_RANGE:\r\n                    creep.moveTo(target, { reusePath: 1 });\r\n                    break;\r\n            }\r\n            tasks.withdraw[type].splice(tasks.withdraw[type].indexOf(task), 1);\r\n        }\r\n        return;\r\n    },\r\n};\r\n//# sourceMappingURL=RoleTransfer.js.map","references":["D:/Desktop/ScreepsCodes/World/src/Tasks/Tasks.ts"],"map":"{\"version\":3,\"file\":\"RoleTransfer.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/Role/RoleTransfer.ts\"],\"names\":[],\"mappings\":\"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\"}"}
